#content-with-admin-nav
  #admin-sub-nav.pull-left
    = render 'admin_navigation'

  table#users-list.table.table-striped.table-bordered.table-scrolled
    thead
      tr
        th Last Name
        th First Name
        th City
        th State
        th Country
        th Email
        th Role
        th Last Login
        th Status
        th
    tbody

  .row-fluid
    .pull-right
      = link_to 'Invite New User', new_user_path, {remote: true, class: 'btn btn-primary'}

javascript:
  var fixedTable = false;
  var usersTable = $('#users-list').dataTable({
        "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t",
        //"sPaginationType": "bootstrap",
        "bPaginate": false,
        "bAutoWidth":false,
        "bProcessing": true,
        "bServerSide": false,
        "sAjaxSource": "#{users_path(format: :table)}",
        "iDeferLoading": #{@users.count},
        "fnServerData": function ( sSource, aoData, fnCallback ){
          $.getJSON(sSource, aoData, function (json){
            fnCallback(json);
            if (!fixedTable){
              fixedTable = new FixedHeader( usersTable, {
                  "offsetTop": 90
              });
            }
          });
        },
        "aoColumns": [
          null,
          null,
          null,
          null,
          null,
          null,
          null,
          {"sWidth": '200px'},
          null,
          {"sWidth": '110px', 'bSortable': false}
        ]
  })
