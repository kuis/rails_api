#content-with-admin-nav
  #admin-sub-nav.pull-left
    = render 'admin_navigation'

  .row-fluid
    #resource-index-container.no-calendars.span12
      .pull-right
        #resource-filter-column data-spy="affix" data-offset-top="0"
          .text-right
            = link_to 'New Team', new_team_path, {remote: true, class: 'btn btn-primary'}
          #collection-list-filters

      table#teams-list.table.table-striped.table-bordered.table-scrolled
        thead
          tr
            th data-sort="name" Teams
            th Number of Members
            th data-sort="description"Description
            th data-sort="status"Status
            th
        tbody


javascript:
  $('#collection-list-filters').filterBox({
    'onChange': function(filterBox){
      teamsTable.tableScroller('reloadData');
    }
  });
  var teamsTable = $('table#teams-list').tableScroller({
    'source': '#{teams_path(format: :json)}',
    'buildParams': function(params) {
      data = $('#collection-list-filters').filterBox('getFilters');
      $.each(data, function(index, value){
        params.push(value);
      });
      return params
    },
    'fixedHeader': true,
    'rowValues': function(t){
      return [t.name, t.users_count, t.description, t.status]
    },
    'rowId': function(row){
      return 'team_'+row.id;
    },
    'headerOffset': 91,
  })