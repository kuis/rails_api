<!DOCTYPE html>
<html>
<head>
  <title>API documentation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link type='text/css' rel='stylesheet' href='../apidoc/stylesheets/bundled/bootstrap.min.css'/>
<link type='text/css' rel='stylesheet' href='../apidoc/stylesheets/bundled/prettify.css'/>
<link type='text/css' rel='stylesheet' href='../apidoc/stylesheets/bundled/bootstrap-responsive.min.css'/>
  <link type='text/css' rel='stylesheet' href='../apidoc/stylesheets/application.css'/>
  <!-- IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <div class="container">
    <div class="row">
      <div id='container'>
        <ul class='breadcrumb'>
  <li>
    <a href='../apidoc.html'>Brandscopic 1.0</a>
    <span class='divider'>/</span>
  </li>
  <li class='active'>
    Event expenses
    
  </li>
  
</ul>

<div class='page-header'>
  <h1>
    Event expenses
    <br>
    <small>Expenses</small>
  </h1>
</div>



  <h2>Supported Formats</h2>
  json, xml

<div class='accordion' id='accordion'>

    <hr>
    <div class='pull-right small'>
      <a href='../apidoc/event_expenses/index.html'> >>> </a>
    </div>
    <div>
        <h2>
          <a href='#description-index'
           class='accordion-toggle'
           data-toggle='collapse'
           data-parent='#accordion'>
            GET /api/v1/events/:event_id/event_expenses
          </a>
          <br>
          <small>Get a list of expenses for an Event</small>
        </h2>
    </div>


    <div id='description-index' class='collapse accordion-body'>
      
<p>Returns a list of expenses associated to the event.</p>

<p>The results are sorted ascending by <code>id</code>.</p>

<p>Each item have the following attributes:</p>
<ul><li>
<p><strong>id</strong>: the expense id</p>
</li><li>
<p><strong>name</strong>: the expense name/label</p>
</li><li>
<p><strong>amount</strong>: the expense amount</p>
</li><li>
<p><strong>receipt:</strong> attachet asset for the expense invoice This will
contain the following attributes:</p>
<ul><li>
<p><strong>id:</strong> the ID of the attached asset</p>
</li><li>
<p><strong>file_file_name:</strong> the name/label of the attached asset</p>
</li><li>
<p><strong>file_content_type:</strong> the attached asset type</p>
</li><li>
<p><strong>file_file_size:</strong> the attached asset size</p>
</li><li>
<p><strong>created_at:</strong> creation date for the attached asset</p>
</li><li>
<p><strong>active:</strong> status (true/false) of the attached asset</p>
</li><li>
<p><strong>file_small:</strong> URL for the small size representation of the
attached asset</p>
</li><li>
<p><strong>file_medium:</strong> URL for the medium size representation of the
attached asset</p>
</li><li>
<p><strong>file_original:</strong> URL for the original size representation of
the attached asset</p>
</li></ul>
</li></ul>


  <h3>Supported Formats</h3>
  json, xml

  <h3>Errors</h3>
    404
    Missing
    <br>
    401
    Unauthorized access
    <br>
    500
    Server crashed for some reason
    <br>


  <h3>Examples</h3>
    <pre class="prettyprint">An example with expenses for an event in the response
GET: /api/v1/events/1351/event_expenses.json?auth_token=swyonWjtcZsbt7N8LArj&amp;company_id=1
[
  {
    &quot;id&quot;: 28,
    &quot;name&quot;: &quot;Expense #1&quot;,
    &quot;amount&quot;: &quot;200.0&quot;,
    &quot;receipt&quot;: {
      &quot;id&quot;: 26,
      &quot;file_file_name&quot;: &quot;image1.jpg&quot;,
      &quot;file_content_type&quot;: &quot;image/jpeg&quot;,
      &quot;file_file_size&quot;: 44705,
      &quot;created_at&quot;: &quot;2013-10-22T13:30:12-07:00&quot;,
      &quot;active&quot;: true,
      &quot;file_small&quot;: &quot;http://s3.amazonaws.com/brandscopic/attached_assets/files/000/000/026/small/image1.jpg?1382473842&quot;,
      &quot;file_medium&quot;: &quot;http://s3.amazonaws.com/brandscopic/attached_assets/files/000/000/026/medium/image1.jpg?1382473842&quot;,
      &quot;file_original&quot;: &quot;http://s3.amazonaws.com/brandscopic/attached_assets/files/000/000/026/original/image1.jpg?1382473842&quot;
    }
  },
  {
    &quot;id&quot;: 29,
    &quot;name&quot;: &quot;Expense #2&quot;,
    &quot;amount&quot;: &quot;359.0&quot;,
    &quot;receipt&quot;: {
      &quot;id&quot;: 27,
      &quot;file_file_name&quot;: &quot;image2.jpg&quot;,
      &quot;file_content_type&quot;: &quot;image/jpeg&quot;,
      &quot;file_file_size&quot;: 10461,
      &quot;created_at&quot;: &quot;2013-10-22T14:25:13-07:00&quot;,
      &quot;active&quot;: true,
      &quot;file_small&quot;: &quot;http://s3.amazonaws.com/brandscopic/attached_assets/files/000/000/027/small/image2.jpg?1382477120&quot;,
      &quot;file_medium&quot;: &quot;http://s3.amazonaws.com/brandscopic/attached_assets/files/000/000/027/medium/image2.jpg?1382477120&quot;,
      &quot;file_original&quot;: &quot;http://s3.amazonaws.com/brandscopic/attached_assets/files/000/000/027/original/image2.jpg?1382477120&quot;
    }
  }
]
</pre>

  <h3>Params</h3>
  <table class='table'>
    <thead>
      <tr>
        <th>Param name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>auth_token </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>User&#39;s authorization token returned by login method</p>

        <br>
        Value: Must be String


    </td>

  </tr>

  
  <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>company_id </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>One of the allowed company ids returned by the “User companies” API method</p>

        <br>
        Value: Must be a number.


    </td>

  </tr>

  
  <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>event_id </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>Event ID</p>

        <br>
        Value: Must be a number.


    </td>

  </tr>

  

    </tbody>
  </table>

    </div>
    <hr>
    <div class='pull-right small'>
      <a href='../apidoc/event_expenses/create.html'> >>> </a>
    </div>
    <div>
        <h2>
          <a href='#description-create'
           class='accordion-toggle'
           data-toggle='collapse'
           data-parent='#accordion'>
            POST /api/v1/events/:event_id/event_expenses
          </a>
          <br>
          <small>Create a new event expense</small>
        </h2>
    </div>


    <div id='description-create' class='collapse accordion-body'>
      
<p>Allows to attach an expense file to the event. The expense file should
first be uploaded to Amazon S3 using the method described in this <a
href="http://aws.amazon.com/articles/1434">article</a>. Once uploaded to
S3, the resulting URL should be submitted to this method and the expense
file will be attached to the event. Because the expense file is generated
asynchronously, the thumbnails are not inmediately available.</p>

<p>The format of the URL should be in the form:
<strong>https</strong>://s3.amazonaws.com/&lt;bucket_name&gt;/uploads/&lt;folder&gt;/filename
where:</p>
<ul><li>
<p><strong>bucket_name</strong>: brandscopic-stage</p>
</li><li>
<p><strong>folder</strong>: the folder name where the photo was uploaded to</p>
</li></ul>


  <h3>Supported Formats</h3>
  json, xml

  <h3>Errors</h3>
    404
    Missing
    <br>
    401
    Unauthorized access
    <br>
    500
    Server crashed for some reason
    <br>


  <h3>Examples</h3>
    <pre class="prettyprint">POST /api/v1/events/192/event_expenses.json?auth_token=AJHshslaA.sdd&amp;company_id=1
DATA:
{
  event_expense: {
    name: &#39;Expense #1&#39;,
    amount: 350,
    receipt_attributes: {
      direct_upload_url: &#39;https://s3.amazonaws.com/brandscopic-dev/uploads/12390bs-25632sj-2-83KjsH984sd/SV-T101-P005-111413.jpg&#39;
    }
  }
}

RESPONSE:
{
  &quot;id&quot;: 196,
  &quot;name&quot;: &quot;Expense #1&quot;,
  &quot;amount&quot;: &quot;350.0&quot;,
  &quot;receipt&quot;: {
    &quot;id&quot;: 45554,
    &quot;file_file_name&quot;: &quot;SV-T101-P005-111413.JPG&quot;,
    &quot;file_content_type&quot;: &quot;image/jpeg&quot;,
    &quot;file_file_size&quot;: 611320,
    &quot;created_at&quot;: &quot;2013-11-19T00:49:24-08:00&quot;,
    &quot;active&quot;: true
    &quot;file_small&quot;: &quot;http://s3.amazonaws.com/brandscopic-dev/attached_assets/files/000/000/45554/small/SV-T101-P005-111413.jpg?1389026763&quot;,
    &quot;file_medium&quot;: &quot;http://s3.amazonaws.com/brandscopic-dev/attached_assets/files/000/000/45554/medium/SV-T101-P005-111413.jpg?1389026763&quot;,
    &quot;file_original&quot;: &quot;http://s3.amazonaws.com/brandscopic-dev/attached_assets/files/000/000/45554/original/SV-T101-P005-111413.jpg?1389026763&quot;
  }
}
</pre>

  <h3>Params</h3>
  <table class='table'>
    <thead>
      <tr>
        <th>Param name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>auth_token </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>User&#39;s authorization token returned by login method</p>

        <br>
        Value: Must be String


    </td>

  </tr>

  
  <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>company_id </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>One of the allowed company ids returned by the “User companies” API method</p>

        <br>
        Value: Must be a number.


    </td>

  </tr>

  
  <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>event_id </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>Event ID</p>

        <br>
        Value: Must be a number.


    </td>

  </tr>

  
  <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>event_expense </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
        <br>
        Value: Must be a Hash


    </td>

  </tr>

    <tr style='background-color:rgb(250,250,250);'>
    <td>
      <strong>event_expense[name] </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>Event expense name/label</p>

        <br>
        Value: Must be String


    </td>

  </tr>

  
  <tr style='background-color:rgb(250,250,250);'>
    <td>
      <strong>event_expense[amount] </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>Event expense amount</p>

        <br>
        Value: Must be String


    </td>

  </tr>

  
  <tr style='background-color:rgb(250,250,250);'>
    <td>
      <strong>event_expense[receipt_attributes] </strong><br>
      <small>
        optional
        , nil allowed
      </small>
    </td>
    <td>
      
        <br>
        Value: Must be a Hash


    </td>

  </tr>

    <tr style='background-color:rgb(245,245,245);'>
    <td>
      <strong>event_expense[receipt_attributes][direct_upload_url] </strong><br>
      <small>
        optional
        , nil allowed
      </small>
    </td>
    <td>
      
<p>The receipt URL. This should be a valid Amazon S3&#39;s URL.</p>

        <br>
        Value: Must be String


    </td>

  </tr>

  



    </tbody>
  </table>

    </div>
    <hr>
    <div class='pull-right small'>
      <a href='../apidoc/event_expenses/form.html'> >>> </a>
    </div>
    <div>
        <h2>
          <a href='#description-form'
           class='accordion-toggle'
           data-toggle='collapse'
           data-parent='#accordion'>
            GET /api/v1/events/:event_id/event_expenses/form
          </a>
          <br>
          <small>Returns a list of requred fields for uploading a file to S3</small>
        </h2>
    </div>


    <div id='description-form' class='collapse accordion-body'>
      
<p>This method returns all the info required to make a POST to Amazon S3 to
upload a new file. The key sent to S3 should start with /uploads and has to
be created into a new folder with a unique generated name. Ideally using a
GUID. Eg: /uploads/9afa6775-2c8e-44f8-9cda-280e80446ced/My file.jpg</p>

<p>The signature will expire 1 hour after it&#39;s generated, therefore,
it&#39;s recommended to not cache these fields for long time.</p>


  <h3>Supported Formats</h3>
  json, xml

  <h3>Errors</h3>
    404
    Missing
    <br>
    401
    Unauthorized access
    <br>
    500
    Server crashed for some reason
    <br>


  <h3>Examples</h3>
    <pre class="prettyprint">GET /api/v1/events/123/event_expenses/form.json?company_id=1&amp;auth_token=XXsikw982okds93
{
    &quot;fields&quot;: {
        &quot;AWSAccessKeyId&quot;: &quot;AKIAIJSENKEXXZNMLW3VQ&quot;,
        &quot;key&quot;: null,
        &quot;policy&quot;: &quot;ioJleHBpcmF0S0zMVQyMTo0NToyNFoiLCJjb25kaXRpb25zIjsoOHYLSSdHMtd2l0aCIsIiRrZXkiLCJ1cGxvYWRzLyJdLHsiYnVja2V0IjoiYnJhbmRzY29waWMtZGV2In0sWyJzdGFydHMtd2l0aCIsIiRrZXkiLCIiXSx7IlNlY3VyZSI6InRydWTYosS&quot;,
        &quot;signature&quot;: &quot;Q8TG16PD850JapPweQGAaK/o4NE=&quot;,
        &quot;Secure&quot;: &quot;true&quot;
    },
    &quot;url&quot;: &quot;https://bucket-name.s3.amazonaws.com/&quot;
}
</pre>

  <h3>Params</h3>
  <table class='table'>
    <thead>
      <tr>
        <th>Param name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>auth_token </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>User&#39;s authorization token returned by login method</p>

        <br>
        Value: Must be String


    </td>

  </tr>

  
  <tr style='background-color:rgb(255,255,255);'>
    <td>
      <strong>company_id </strong><br>
      <small>
        required
        
      </small>
    </td>
    <td>
      
<p>One of the allowed company ids returned by the “User companies” API method</p>

        <br>
        Value: Must be a number.


    </td>

  </tr>

  

    </tbody>
  </table>

    </div>
</div>


        
      </div>
    </div>
    <hr>
    <footer></footer>
  </div>
  <script type='text/javascript' src='../apidoc/javascripts/bundled/jquery-1.7.2.js'></script>
<script type='text/javascript' src='../apidoc/javascripts/bundled/bootstrap-collapse.js'></script>
<script type='text/javascript' src='../apidoc/javascripts/bundled/prettify.js'></script>
<script type='text/javascript' src='../apidoc/javascripts/apipie.js'></script>
</body>
</html>
